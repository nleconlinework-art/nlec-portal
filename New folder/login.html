<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Login | NLEC India</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .login-card { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; border-top: 6px solid #003366; }
        .login-card h2 { color: #003366; margin-bottom: 10px; }
        .login-card p { color: #666; font-size: 14px; margin-bottom: 25px; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
        .login-btn { background: #ff6600; color: white; border: none; width: 100%; padding: 12px; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .login-btn:hover { background: #e65c00; }
        .back-home { margin-top: 20px; display: block; color: #003366; text-decoration: none; font-size: 14px; }
    </style>
</head>
<body>

<div class="login-card">
    <img src="logo.png" alt="Logo" style="height: 60px; margin-bottom: 15px;" onerror="this.style.display='none'">
    <h2>Student Login</h2>
    <p>Please enter your credentials to access dashboard</p>
    
    <input type="text" id="enrollNo" placeholder="Enrollment / Roll No.">
    <input type="password" id="dob" placeholder="Password (DOB or Mobile)">
    
    <button class="login-btn" onclick="processLogin()">Login to Dashboard</button>
    
    <a href="index.html" class="back-home">← Back to Home</a>
</div>

<script>
async function processLogin() {
    const roll = document.getElementById('enrollNo').value.trim().toUpperCase();
    const pass = document.getElementById('dob').value.trim();
    
    if(!roll || !pass) { alert("Please enter both fields"); return; }

    const sheetID = "168luhhOZR6zhAyYT7jEamuuexYgqhr5b731pFBF13DI";
    const url = `https://docs.google.com/spreadsheets/d/${sheetID}/export?format=csv`;

    try {
        const response = await fetch(url);
        const data = await response.text();
        const rows = data.split('\n').map(row => row.split(','));
        
        // छात्र को ढूंढें (मान लीजिये पासवर्ड कालम C यानी index 2 में है)
        const student = rows.find(r => r[0].trim().toUpperCase() === roll);

        if(student) {
            // यहाँ हम अभी के लिए मान रहे हैं कि छात्र का नाम या कोई विशिष्ट जानकारी पासवर्ड है
            // असल में आप अपनी शीट में एक 'Password' कॉलम बना सकते हैं
            sessionStorage.setItem('loggedInUser', JSON.stringify(student));
            window.location.href = "dashboard.html";
        } else {
            alert("Invalid Enrollment No. or Password!");
        }
    } catch (e) {
        alert("Server Error. Try again.");
    }
}
</script>

</body>
</html>